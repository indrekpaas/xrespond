!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var i,r,a,s,o;n(2),n(3),n(4),r=n(5),a=n(19),i=n(20),n(9),n(8),s=n(7),MessageBus.subscribe(s.local,"sourceSubmit",s.local.updateAttr("url")),MessageBus.subscribe(s.local,"deviceHeight",s.local.updateAttr("stretch")),o=function(e,t){return ReactDOM.render(React.createElement(e),document.getElementById(t))},document.addEventListener("DOMContentLoaded",function(e){return o(r,"main"),o(a,"source"),o(i,"device-height")})},function(e,t){!function(){BaseStore=function(e){var t=[];this.get=function(){return n.currentValue},this.set=function(e){return n.currentValue=e,n.emit(n.currentValue,n.keys(e))},this.register=function(e){if("function"!=typeof e)throw"Must supply a function, '"+typeof e+"' given instead";-1===t.indexOf(e)&&t.push(e)},this.registerAndInvoke=function(e){e(this.get()),this.register(e)},this.deregister=function(e){t.splice(t.indexOf(e),1)},this.reset=function(){t=[],this.set(e||null)},this.setCreateFunction=function(e){this.createFunction=e},this.setUpdateFunction=function(e){this.updateFunction=e},this.setRemoveFunction=function(e){this.removeFunction=e},this.create=function(e){this.createFunction(e,n)},this.update=function(e){this.updateFunction(e,n)},this.remove=function(e){this.removeFunction(e,n)};var n={currentValue:e||null,keys:function(e){if(!e)return null;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},emit:function(e,n){for(var i=0;i<t.length;i++)try{t[i](e,n)}catch(r){}return e}};return this}}()},function(e,t){var n="__subscriptions",i={};MessageBus={registry:{},publish:function(e,t){i[e]&&i[e].forEach(function(i){i[n][e].call(i,t)})},subscribe:function(e,t,r){i[t]||(i[t]=[]),i[t].push(e),e[n]||(e[n]={}),e[n][t]=r},unsubscribe:function(e,t){if(i[t]){var r=i[t].indexOf(e);r>-1&&i[t].splice(r,1),delete e[n][t]}}},MessageBusMixin={publish:MessageBus.publish.bind(i),subscribe:function(e,t){MessageBus.subscribe(this,e,t)},unsubscribe:function(e){MessageBus.unsubscribe(this,e)},componentWillUnmount:function(){Object.keys(this[n]).forEach(this.unsubscribe)}}},function(e,t){!function(){ToggleExpanded={toggleExpanded:function(e){this.setState({expanded:!this.state.expanded})}}}()},function(e,t,n){var i,r,a,s,o;i=n(6),r=n(18),s=n(7),a=n(12),e.exports=o=React.createClass({mixins:[MessageBusMixin],getInitialState:function(){return{stretchsize:s.local.attr("stretch")}},componentWillMount:function(){return a.registerAndInvoke(this._update)},componentDidMount:function(){return this.subscribe("deviceHeight",this._onDeviceControl)},componentWillUnmount:function(){return a.deregister(this._update),this.unsubscribe("deviceHeight")},_onDeviceControl:function(e){return this.setState({stretchsize:e})},_update:function(e){return this.setState({collection:e})},render:function(){var e,t,n;return n=this.state.collection.map(function(e){return React.createElement(i,{key:e.id,id:e.id})}),e=React.createElement(r,{id:-1}),t=this.state.stretchsize?" main__wrap--stretch":"",React.createElement("div",{className:"main__wrap"+t},n,e)}})},function(e,t,n){var i,r,a,s,o;o=n(7),r=n(12),a=n(13),s=n(17),e.exports=i=React.createClass({mixins:[ToggleExpanded],getInitialState:function(){return{expanded:!1}},componentWillMount:function(){return r.registerAndInvoke(this._update),document.addEventListener("keydown",this.handleEscKey,!1)},componentWillUnmount:function(){return r.deregister(this._update),document.removeEventListener("keydown",this.handleEscKey,!1)},_update:function(e){var t,n;return n=this,t=_.filter(e,function(e,t){return t===n.props.id}),this.setState(_.extend({},t[0],{expanded:!1}))},handleDropdownSubmit:function(e){return r.update(_.extend({},e,{id:this.props.id})),this.toggleExpanded()},svg:function(){return{__html:'<svg class="icon button__icon"><title>Rotate screen</title><use xlink:href="#icon-rotate-left"></svg>'}},toggleRotated:function(){return r.update({id:this.props.id,width:this.state.height,height:this.state.width})},handleEscKey:function(e){return 27===e.keyCode?this.setState({expanded:!1}):void 0},render:function(){var e,t,n,i;return t=this.state.expanded?React.createElement(a,{reset:!1,id:this.props.id,devices:o.devices_grouped(),handleSubmit:this.handleDropdownSubmit,handleBlur:this.toggleExpanded}):"",e=this.state.name+" ― "+this.state.width+" × "+this.state.height+" dp",i=React.createElement("button",{className:"button button--medium button--square tools__button",dangerouslySetInnerHTML:this.svg(),onClick:this.toggleRotated}),React.createElement("div",{className:"device"},React.createElement("div",{className:"device__wrap"},React.createElement("div",{className:"tools"},React.createElement("div",{className:"tools__group"},React.createElement("button",{className:"button button--medium tools__button device__button",onClick:this.toggleExpanded},e),null!=(n=this.state.rotation)?n:{rotate_button:""})),t,React.createElement("div",{className:"screen"},React.createElement(s,{id:this.props.id,name:this.state.name}))))}})},function(e,t,n){var i,r,a;n(8),a=n(10),i=n(11),e.exports=r={local:XrespondLocal(),devices:function(){return i},devices_grouped:function(){return this.group_devices_by_type(this.devices())},devices_search:function(e){var t,n,i;return n={extract:function(e){return _.toArray(_.pick(e,"type","name","width","height")).join(" ")}},i=a.filter(e,this.devices(),n),t=_.pluck(i,"original"),this.group_devices_by_type(t)},device_by_name:function(e){return _.find(this.devices(),function(t){return t.name===e})},group_devices_by_type:function(e){return _.groupBy(e,function(e){return e.type})},resetKeys:function(e,t){return e.id=t,e}}},function(e,t,n){XrespondDefaults=n(9),XrespondLocal=function(){var e=this;return this.defaultState=function(){return{devices:XrespondDefaults.devices(),url:XrespondDefaults.url,stretch:!1}},this.load=function(){return JSON.parse(localStorage.getItem("xrespond"))||e.defaultState()},this.save=function(e){localStorage.setItem("xrespond",JSON.stringify(e))},this.attr=function(t){return e.load()[t]},this.updateAttr=function(t){return function(n){var i=e.load();i[t]=n,e.save(i)}},this}},function(e,t){e.exports=XrespondDefaults={devices:function(){var e=["Apple iPhone 5","Google Nexus 7","Apple iPad Air","Apple iPad Pro",'Apple MacBook Air 11.6"'];return defaultDevices=_.map(e,function(e,t){var n=_.find(Devices,function(t){return t.name==e});return _.extend({},n,{id:t})})},url:""}},function(e,t,n){!function(){var t={};e.exports=t,t.simpleFilter=function(e,n){return n.filter(function(n){return t.test(e,n)})},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var i,r=0,a=[],s=t.length,o=0,c=0,u=n.pre||"",l=n.post||"",d=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;s>h;h++)i=t[h],d[h]===e[r]?(i=u+i+l,r+=1,c+=1+c):c=0,o+=c,a[a.length]=i;return r===e.length?{rendered:a.join(""),score:o}:null},t.filter=function(e,n,i){return i=i||{},n.reduce(function(n,r,a,s){var o=r;i.extract&&(o=i.extract(r));var c=t.match(e,o,i);return null!=c&&(n[n.length]={string:c.rendered,score:c.score,index:a,original:r}),n},[]).sort(function(e,t){var n=t.score-e.score;return n?n:e.index-t.index})}}()},function(e,t){e.exports=Devices=[{type:"Phone",name:"Apple iPhone 5",width:320,height:568,rotation:!0,orientation:"portrait"},{type:"Phone",name:"Google Nexus 5",width:360,height:640,rotation:!0,orientation:"portrait"},{type:"Phone",name:"Apple iPhone 6",width:375,height:667,rotation:!0,orientation:"portrait"},{type:"Phone",name:"Google Nexus 4",width:384,height:640,rotation:!0,orientation:"portrait"},{type:"Phone",name:"Google Nexus 6",width:412,height:690,rotation:!0,orientation:"portrait"},{type:"Phone",name:"Apple iPhone 6 Plus",width:414,height:736,rotation:!0,orientation:"portrait"},{type:"Phone",name:"Nokia Lumia 1520",width:432,height:768,rotation:!0,orientation:"portrait"},{type:"Tablet",name:'Amazon Kindle Fire HD 7"',width:480,height:800,rotation:!0,orientation:"portrait"},{type:"Tablet",name:"Google Nexus 7",width:600,height:960,rotation:!0,orientation:"portrait"},{type:"Tablet",name:"Microsoft Surface Pro",width:720,height:1280,rotation:!0,orientation:"portrait"},{type:"Tablet",name:"Apple iPad Air",width:768,height:1024,rotation:!0,orientation:"portrait"},{type:"Tablet",name:'Samsung Galaxy Tab 10.1"',width:800,height:1280,rotation:!0,orientation:"portrait"},{type:"Tablet",name:"Apple iPad Pro",width:1024,height:1366,rotation:!0,orientation:"portrait"},{type:"Laptop",name:"Google Chromebook Pixel",width:1280,height:850,rotation:!1,orientation:"landscape"},{type:"Laptop",name:'Apple MacBook Air 11.6"',width:1366,height:768,rotation:!1,orientation:"landscape"},{type:"Laptop",name:'Apple MacBook Air 13.3"',width:1440,height:900,rotation:!1,orientation:"landscape"},{type:"Laptop",name:"Microsoft Surface Book",width:1500,height:1e3,rotation:!1,orientation:"landscape"},{type:"Laptop",name:'Apple MacBook Pro 15.4"',width:1680,height:1050,rotation:!1,orientation:"landscape"},{type:"Desktop",name:'Apple iMac 21.5"',width:1920,height:1080,rotation:!1,orientation:"landscape"},{type:"Desktop",name:'Apple iMac 27"',width:2560,height:1440,rotation:!1,orientation:"landscape"}]},function(e,t,n){var i,r;r=n(7),e.exports=i=BaseStore(r.local.attr("devices")),i.register(r.local.updateAttr("devices")),i.setCreateFunction(function(e,t){var n;return n=React.addons.update(t.currentValue,{$push:[e]}),_.map(n,r.resetKeys),i.set(n)}),i.setUpdateFunction(function(e,t){var n,a,s,o;return o=_.find(t.currentValue,function(t){return t.id===e.id}),n=t.currentValue.indexOf(o),s=_.extend({},o,e),a=React.addons.update(t.currentValue,{$splice:[[n,1,s]]}),_.map(a,r.resetKeys),i.set(a)}),i.setRemoveFunction(function(e,t){var n;return n=React.addons.update(t.currentValue,{$splice:[[e,1]]}),_.map(n,r.resetKeys),i.set(n)})},function(e,t,n){var i,r,a,s,o;o=n(7),r=n(14),i=n(15),s=n(16),e.exports=a=React.createClass({getInitialState:function(){return{devices:this.props.devices,search:"",localClick:!1}},search:function(e){var t;return t=o.devices_search(e),this.setState({search:e,devices:t})},handleInputChange:function(e){return this.search(e.target.value)},handleClear:function(){return this.setState({localClick:!0}),this.search("")},render:function(){var e,t,n;return n=this,t=_.map(this.state.devices,function(e,t){var i;return i=e.map(function(e,t){return React.createElement(r,{key:e.name,name:e.name,width:e.width,height:e.height,handleSubmit:n.props.handleSubmit})}),React.createElement("div",{className:"menu__section",key:t},React.createElement("div",{className:"menu__title"},t),React.createElement("div",{className:"menu-list"},i))}),e=React.createElement("div",{className:"menu__section"},React.createElement("div",{className:"menu-list"},React.createElement(r,{name:"No device found",subtitle:"Show all devices",handleSubmit:this.handleClear}))),React.createElement("div",{className:"dropdown dropdown--device"},React.createElement("div",{className:"search"},React.createElement("div",{className:"search__title"},"Search for device"),React.createElement("input",{className:"text-input text-input--small search__text-input",placeholder:"Type, name, screen size",value:this.state.search,onChange:this.handleInputChange,ref:"deviceInput"})),React.createElement("div",{className:"menu"},_.isEmpty(this.state.devices)?e:t),React.createElement(i,{id:this.props.id}),React.createElement(s,{reset:this.props.reset,id:this.props.id}))},componentDidMount:function(){return document.addEventListener("click",this.documentClickHandler),this.refs.deviceInput.focus()},componentWillUnmount:function(){return document.removeEventListener("click",this.documentClickHandler)},localClick:function(){return this.state.localClick===!0?(this.setState({localClick:!1}),!0):!1},documentClickHandler:function(e){var t,n,i;if(!this.localClick()){for(n=ReactDOM.findDOMNode(this),i=e.target,t=!1;i.parentNode;){if(t=i===n)return;i=i.parentNode}return this.props.handleBlur()}}})},function(e,t,n){var i,r;r=n(7),e.exports=i=React.createClass({handleClick:function(e){return this.props.handleSubmit(r.device_by_name(this.props.name))},render:function(){var e;return e=this.props.subtitle?this.props.subtitle:this.props.width+" × "+this.props.height+" dp",React.createElement("div",{className:"menu-list__item",tabindex:"0",onKeyPress:this.handleClick,onClick:this.handleClick},React.createElement("div",{className:"menu-list__title"},this.props.name),React.createElement("div",{className:"menu-list__description"},e))}})},function(e,t){var n;e.exports=n=React.createClass({getInitialState:function(){return{width:"",height:""}},handleSubmit:function(e){return e.preventDefault(),DeviceStore.update({name:"Custom",id:this.props.id,width:parseInt(this.state.width),height:parseInt(this.state.height),rotation:!0})},handleChange:function(e){var t;return t={},t[e.target.name]=e.target.value,this.setState(t)},render:function(){return React.createElement("form",{className:"custom-screen",onSubmit:this.handleSubmit},React.createElement("div",{className:"custom-screen__title"},"Custom screen size"),React.createElement("input",{className:"text-input text-input--small custom-screen__text-input",type:"number",min:"0",placeholder:"W",value:this.state.width,onChange:this.handleChange,name:"width",required:!0}),React.createElement("div",{className:"custom-screen__divider"},"×"),React.createElement("input",{className:"text-input text-input--small custom-screen__text-input",type:"number",min:"0",placeholder:"H",value:this.state.height,onChange:this.handleChange,name:"height",required:!0}),React.createElement("button",{className:"button button--small button--submit custom-screen__button",type:"submit"},"Add"))}})},function(e,t){var n;e.exports=n=React.createClass({handleRemove:function(){return this.props.reset?DeviceStore.set(XrespondDefaults.devices()):DeviceStore.remove(this.props.id)},render:function(){var e;return e=this.props.reset?"Reset devices":"Remove device",React.createElement("div",{className:"device-control"},React.createElement("button",{className:"button button--small button--remove",onClick:this.handleRemove},e))}})},function(e,t,n){var i,r,a;a=n(7),i=n(12),e.exports=r=React.createClass({mixins:[MessageBusMixin],getInitialState:function(){return{url:a.local.attr("url"),key:Date.now()}},onSourceSubmit:function(e){return this.setState({url:e,key:Date.now()})},componentWillMount:function(){return i.registerAndInvoke(this._update)},componentDidMount:function(){return this.subscribe("sourceSubmit",this.onSourceSubmit)},componentWillUnmount:function(){return i.deregister(this._update),this.unsubscribe("sourceSubmit")},_update:function(e){var t,n;return n=this,t=_.filter(e,function(e,t){return t===n.props.id}),this.setState(t[0])},render:function(){var e;return e={width:this.state.width,height:this.state.height},React.createElement("iframe",{className:"screen__viewport",key:this.state.key,name:this.props.name,src:this.state.url,style:e})}})},function(e,t){var n;e.exports=n=React.createClass({mixins:[ToggleExpanded],getInitialState:function(){return{expanded:!1}},handleDropdownSubmit:function(e){return DeviceStore.create(e),this.toggleExpanded()},render:function(){var e;return e=this.state.expanded?React.createElement(XrespondDropdownDevices,{reset:!0,id:this.props.id,devices:Xrespond.devices_grouped(),handleSubmit:this.handleDropdownSubmit,handleBlur:this.toggleExpanded}):"",React.createElement("div",{className:"device"},React.createElement("div",{className:"device__wrap"},React.createElement("div",{className:"tools"},React.createElement("div",{className:"tools__group"},React.createElement("button",{className:"button button--medium tools__button device__button",onClick:this.toggleExpanded},"Add new device"))),e))}})},function(e,t,n){var i,r;i=n(7),e.exports=r=React.createClass({mixins:[MessageBusMixin],getInitialState:function(){return{url:i.local.attr("url")}},handleSubmit:function(e){var t;return e.preventDefault(),t=this.refs.source.value.trim(),this.publish("sourceSubmit",this.assert_prefix(t))},assert_prefix:function(e){return e.match(/^http/)||""===e?e:"http://"+e},render:function(){return React.createElement("form",{className:"source__wrap",onSubmit:this.handleSubmit},React.createElement("input",{className:"text-input text-input--medium source__text-input",placeholder:"Enter URL",ref:"source",defaultValue:this.state.url,onChange:this.handleChange}),React.createElement("button",{className:"button button--medium button--submit source__button"},"Respond"))}})},function(e,t){var n;e.exports=n=React.createClass({mixins:[MessageBusMixin],eventDefault:function(){return this.publish("deviceHeight",!1)},eventStretch:function(){return this.publish("deviceHeight",!0)},render:function(){return React.createElement("div",{className:"tools"},React.createElement("div",{className:"tools__title"},"Device height"),React.createElement("div",{className:"tools__group"},React.createElement("button",{className:"button button--medium tools__button",onClick:this.eventDefault},"Default"),React.createElement("button",{className:"button button--medium tools__button",onClick:this.eventStretch},"Stretch")))}})}]);
//# sourceMappingURL=bundle.js.map